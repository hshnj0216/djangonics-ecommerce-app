<div id="customer-reviews-container" class="px-5">
    {% if can_submit_review %}
    <form class="w-75" action="" novalidate>
        <h5>Post your review</h5>
        {% csrf_token %}
        <div class="form-group mb-3">
            <label class="form-label">Review title</label>
            <input class="form-control invalid" type="text" name="review-title" placeholder="Review title or summary"/>
            <p class="form-text text-danger error-message">Title must be at least 5 characters.</p>
        </div>
        <div class="form-group mb-3">
            <label class="form-label">Review</label>
            <textarea col="100"
                      row="10"
                      class="form-control invalid"
                      type="text"
                      name="review-content"
                      placeholder="Write your detailed review here..."
            ></textarea>
            <p class="form-text text-danger error-message">Review must at least be 50 characters.</p>
        </div>
        <input id="post-review-btn" class="btn btn-primary disabled" type="submit" value="Post review" data-product-id="{{product.id}}">
    </form>
    {% endif %}
    {% load bootstrap_icons %}
    {% if product.product_reviews %}
    <h5 class="my-3">Customer reviews</h5>
    {% for rating in product.product_ratings %}
    {% if rating.review %}
    <div class="review border-bottom w-75">
        <div class="d-flex">
            {% bs_icon 'person-circle' %}
            <span class="ms-3">{{rating.review.user.first_name}} {{rating.review.user.last_name}}</span>
        </div>
        <div class="d-flex m-0">
                {% for i in "12345" %}
                {% if rating.value >= forloop.counter %}
                <span class="fas fa-star m-0" data-rating="{{ forloop.counter }}" data-product-id="{{ product.id }}"></span>
                {% else %}
                <span class="far fa-star m-0" data-rating="{{ forloop.counter }}" data-product-id="{{ product.id }}"></span>
                {% endif %}
                {% endfor %}
                <h6 class="ms-2 text-center">{{ rating.review.title }}</h6>
        </div>
        <p class="m-0">{{ rating.review.created_at }}</p>
        <h6>verified purchase</h6>
        <p>{{ rating.review.content }}</p>
        <hr>
    </div>
    {% endif %}
    {% endfor %}
    {% else %}
    <div class="py-5 my-5">
        <h3>There are no reviews for this product yet.</h3>
    </div>
    {% endif %}
</div>