{% extends 'base.html' %}
{% block title %}Product Details{% endblock %}
{% load bootstrap_icons %}
{% load static %}
{% block content %}
    <div>
        <section class="px-5">
            <h2>Product Details</h2>
            <div class="row w-100 m-0 d-flex">
                <div class="col-lg-4 border d-flex align-items-center">
                    <img src="https://via.placeholder.com/300x200/cccccc"
                         data-src="{% url 'products:get_images' product.id %}"
                         loading="lazy"
                         class="product-detail-img w-100"
                         alt="product-image"
                    />
                </div>
                <section class="col-lg-6 border d-flex flex-column flex-grow-1">
                    <div class="border-bottom border-3 flex-grow-1 h-100">
                        <h4 class="fs-2">{{product.name}}</h4>
                        {% if product.stock > 20 %}
                        <p class="text-success fw-bold">In Stock</p>
                        {% else %}
                        <p class="text-danger fw-bold">Only {{product.stock}} left in stock - order soon.</p>
                        {% endif %}
                        <h5>${{product.price}}</h5>
                        {% include 'products/rating_partial.html' %}
                    </div>
                    <article class="mt-3">
                        <h6>About this item:</h6>
                        <p>{{product.description}}</p>
                    </article>
                </section>
                <div class="col-lg-2 border">
                    <h6>Payment</h6>
                    <form action="{% url 'products:buy_now' product.id %}"
                          class="buy-add-to-cart-form"
                          data-add-to-cart-url="{% url 'products:add_to_cart' %}"
                          data-product-id="{{product.id}}"
                    >
                        {% csrf_token %}
                        <div>
                            <label for="qty">Quantity:</label>
                            <select name="qty" id="qty" class="qty">
                                {% for i in range %}
                                <option value="{{i}}">{{i}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <button class="add-to-cart-button" type="submit">Add to Cart</button>
                        <button class="buy-button" type="submit">Buy Now</button>
                    </form>
                </div>
            </div>
        </section>
        <section>
            <h2>Product Reviews</h2>
        </section>
    </div>
    <div id="toast-container">
        <div id="toast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header d-flex justify-content-between align-items-center">
                {% bs_icon 'cart-check-fill' %}
                <strong class="me-auto ms-2">Cart update</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body py-1">
                <p class="mb-0">You have a new item in your cart. Donâ€™t let it get lonely, add some more! Or you can
                    <a href="{% url 'products:cart' %}#{{product.id}}">view item in cart.</a>
                </p>
            </div>
        </div>
    </div>
{% endblock %}
{% block script %}
    <script src="{% static 'js/addToCart.js' %}"></script>
{% endblock %}
